"use strict";

var _e2fcrwler = require("./e2fcrwler");

var _winston = require("winston");

//jshint esversion: 6
var cron = require("node-cron");

var express = require("express");

var fs = require("fs");

var datstore = require('../../radharani/e2fdatastore'); //require("babel-core/register");
//require("babel-polyfill");


var uuidv4 = require('uuid/v4');

var moment = require('moment');

_e2fcrwler.Logger.log('info', "Starting process ...");

var e2fcrawler = new _e2fcrwler.E2FCrawler({
  url: '',
  output: 'json'
});
var response = e2fcrawler.postData({
  url: 'https://expressdev.ease2fly.com/api/destinations/get-destinations-list',
  data: {
    usrId: 109,
    usrType: "N"
  }
});
response.then(function (data) {
  _e2fcrwler.Logger.log("info", JSON.stringify(data.result));

  _e2fcrwler.Logger.log('info', JSON.stringify(e2fcrawler.finalData));

  var runid = "".concat(uuidv4(), "_").concat(moment().format("DD-MMM-YYYY HH:mm:ss.SSS"));
  datstore.saveCircleBatchData(runid, e2fcrawler.finalData, "", function (rrid) {
    datstore.finalization(rrid, function () {
      _e2fcrwler.Logger.log('info', 'Finished');

      process.removeAllListeners("unhandledRejection");
      process.removeAllListeners('exit');
      process.removeAllListeners();
      return;
    });
    return;
  });
}).catch(function (error) {
  _e2fcrwler.Logger.log("error", error);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lMmYvaW5kZXhlMmYuanMiXSwibmFtZXMiOlsiY3JvbiIsInJlcXVpcmUiLCJleHByZXNzIiwiZnMiLCJkYXRzdG9yZSIsInV1aWR2NCIsIm1vbWVudCIsIkxvZ2dlciIsImxvZyIsImUyZmNyYXdsZXIiLCJFMkZDcmF3bGVyIiwidXJsIiwib3V0cHV0IiwicmVzcG9uc2UiLCJwb3N0RGF0YSIsImRhdGEiLCJ1c3JJZCIsInVzclR5cGUiLCJ0aGVuIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3VsdCIsImZpbmFsRGF0YSIsInJ1bmlkIiwiZm9ybWF0Iiwic2F2ZUNpcmNsZUJhdGNoRGF0YSIsInJyaWQiLCJmaW5hbGl6YXRpb24iLCJwcm9jZXNzIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFXQTs7QUFDQTs7QUFaQTtBQUNBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBcEI7O0FBQ0EsSUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxJQUFNRSxFQUFFLEdBQUdGLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNBLElBQU1HLFFBQVEsR0FBR0gsT0FBTyxDQUFDLDhCQUFELENBQXhCLEMsQ0FDQTtBQUNBOzs7QUFFQSxJQUFNSSxNQUFNLEdBQUdKLE9BQU8sQ0FBQyxTQUFELENBQXRCOztBQUNBLElBQU1LLE1BQU0sR0FBR0wsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBS0FNLGtCQUFPQyxHQUFQLENBQVcsTUFBWCxFQUFtQixzQkFBbkI7O0FBRUEsSUFBSUMsVUFBVSxHQUFHLElBQUlDLHFCQUFKLENBQWU7QUFBQ0MsRUFBQUEsR0FBRyxFQUFFLEVBQU47QUFBVUMsRUFBQUEsTUFBTSxFQUFFO0FBQWxCLENBQWYsQ0FBakI7QUFDQSxJQUFJQyxRQUFRLEdBQUdKLFVBQVUsQ0FBQ0ssUUFBWCxDQUFvQjtBQUFDSCxFQUFBQSxHQUFHLEVBQUUsd0VBQU47QUFBZ0ZJLEVBQUFBLElBQUksRUFBRTtBQUNySEMsSUFBQUEsS0FBSyxFQUFFLEdBRDhHO0FBRXJIQyxJQUFBQSxPQUFPLEVBQUU7QUFGNEc7QUFBdEYsQ0FBcEIsQ0FBZjtBQUtBSixRQUFRLENBQUNLLElBQVQsQ0FBYyxVQUFBSCxJQUFJLEVBQUk7QUFDbEJSLG9CQUFPQyxHQUFQLENBQVcsTUFBWCxFQUFtQlcsSUFBSSxDQUFDQyxTQUFMLENBQWVMLElBQUksQ0FBQ00sTUFBcEIsQ0FBbkI7O0FBRUFkLG9CQUFPQyxHQUFQLENBQVcsTUFBWCxFQUFtQlcsSUFBSSxDQUFDQyxTQUFMLENBQWVYLFVBQVUsQ0FBQ2EsU0FBMUIsQ0FBbkI7O0FBRUEsTUFBSUMsS0FBSyxhQUFNbEIsTUFBTSxFQUFaLGNBQWtCQyxNQUFNLEdBQUdrQixNQUFULENBQWdCLDBCQUFoQixDQUFsQixDQUFUO0FBQ0FwQixFQUFBQSxRQUFRLENBQUNxQixtQkFBVCxDQUE2QkYsS0FBN0IsRUFBb0NkLFVBQVUsQ0FBQ2EsU0FBL0MsRUFBMEQsRUFBMUQsRUFBOEQsVUFBU0ksSUFBVCxFQUFlO0FBQ3pFdEIsSUFBQUEsUUFBUSxDQUFDdUIsWUFBVCxDQUFzQkQsSUFBdEIsRUFBNEIsWUFBTTtBQUM5Qm5CLHdCQUFPQyxHQUFQLENBQVcsTUFBWCxFQUFtQixVQUFuQjs7QUFFQW9CLE1BQUFBLE9BQU8sQ0FBQ0Msa0JBQVIsQ0FBMkIsb0JBQTNCO0FBQ0FELE1BQUFBLE9BQU8sQ0FBQ0Msa0JBQVIsQ0FBMkIsTUFBM0I7QUFDQUQsTUFBQUEsT0FBTyxDQUFDQyxrQkFBUjtBQUNBO0FBQ0gsS0FQRDtBQVFBO0FBQ0gsR0FWRDtBQVdILENBakJELEVBaUJHQyxLQWpCSCxDQWlCUyxVQUFBQyxLQUFLLEVBQUk7QUFDZHhCLG9CQUFPQyxHQUFQLENBQVcsT0FBWCxFQUFvQnVCLEtBQXBCO0FBQ0gsQ0FuQkQiLCJzb3VyY2VzQ29udGVudCI6WyIvL2pzaGludCBlc3ZlcnNpb246IDZcclxuY29uc3QgY3JvbiA9IHJlcXVpcmUoXCJub2RlLWNyb25cIik7XHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XHJcbmNvbnN0IGRhdHN0b3JlID0gcmVxdWlyZSgnLi4vLi4vcmFkaGFyYW5pL2UyZmRhdGFzdG9yZScpO1xyXG4vL3JlcXVpcmUoXCJiYWJlbC1jb3JlL3JlZ2lzdGVyXCIpO1xyXG4vL3JlcXVpcmUoXCJiYWJlbC1wb2x5ZmlsbFwiKTtcclxuXHJcbmNvbnN0IHV1aWR2NCA9IHJlcXVpcmUoJ3V1aWQvdjQnKTtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcblxyXG5pbXBvcnQge0xvZ2dlciwgRTJGQ3Jhd2xlcn0gZnJvbSAnLi9lMmZjcndsZXInO1xyXG5pbXBvcnQgeyBsb2dnZXJzIH0gZnJvbSAnd2luc3Rvbic7XHJcblxyXG5Mb2dnZXIubG9nKCdpbmZvJywgXCJTdGFydGluZyBwcm9jZXNzIC4uLlwiKTtcclxuXHJcbmxldCBlMmZjcmF3bGVyID0gbmV3IEUyRkNyYXdsZXIoe3VybDogJycsIG91dHB1dDogJ2pzb24nfSk7XHJcbmxldCByZXNwb25zZSA9IGUyZmNyYXdsZXIucG9zdERhdGEoe3VybDogJ2h0dHBzOi8vZXhwcmVzc2Rldi5lYXNlMmZseS5jb20vYXBpL2Rlc3RpbmF0aW9ucy9nZXQtZGVzdGluYXRpb25zLWxpc3QnLCBkYXRhOiB7XHJcbiAgICB1c3JJZDogMTA5LFxyXG4gICAgdXNyVHlwZTogXCJOXCJcclxufX0pO1xyXG5cclxucmVzcG9uc2UudGhlbihkYXRhID0+IHtcclxuICAgIExvZ2dlci5sb2coXCJpbmZvXCIsIEpTT04uc3RyaW5naWZ5KGRhdGEucmVzdWx0KSk7XHJcblxyXG4gICAgTG9nZ2VyLmxvZygnaW5mbycsIEpTT04uc3RyaW5naWZ5KGUyZmNyYXdsZXIuZmluYWxEYXRhKSk7XHJcblxyXG4gICAgbGV0IHJ1bmlkID0gYCR7dXVpZHY0KCl9XyR7bW9tZW50KCkuZm9ybWF0KFwiREQtTU1NLVlZWVkgSEg6bW06c3MuU1NTXCIpfWA7XHJcbiAgICBkYXRzdG9yZS5zYXZlQ2lyY2xlQmF0Y2hEYXRhKHJ1bmlkLCBlMmZjcmF3bGVyLmZpbmFsRGF0YSwgXCJcIiwgZnVuY3Rpb24ocnJpZCkge1xyXG4gICAgICAgIGRhdHN0b3JlLmZpbmFsaXphdGlvbihycmlkLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ2luZm8nLCAnRmluaXNoZWQnKTtcclxuXHJcbiAgICAgICAgICAgIHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzKFwidW5oYW5kbGVkUmVqZWN0aW9uXCIpO1xyXG4gICAgICAgICAgICBwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycygnZXhpdCcpO1xyXG4gICAgICAgICAgICBwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfSk7XHJcbn0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgIExvZ2dlci5sb2coXCJlcnJvclwiLCBlcnJvcik7XHJcbn0pO1xyXG4iXX0=